# 快速开始指南

## 1. 环境准备

### 安装 Go（如果未安装）
- Windows: 下载 [https://golang.org/dl/](https://golang.org/dl/)
- Mac: `brew install go`
- Linux: `sudo apt install golang-go`

验证安装：
```bash
go version
```

### 安装 MySQL

确保 MySQL 服务已启动。

## 2. 配置后端

### 复制配置文件
```bash
cd backend
cp .env.example .env
```

### 编辑 .env 文件

修改数据库配置：
```env
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=your_mysql_password
DB_NAME=ningxia_wenlv
```

### 创建数据库
```bash
mysql -u root -p
CREATE DATABASE ninxia_wenlv CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
exit;
```

### 初始化管理员账号

1. 启动服务：
```bash
go run init_admin.go
```

2. 访问：
```
http://localhost:8080/init-admin
```

3. 默认账号：
```
用户名：admin
密码：admin123
```

⚠️ **重要**：登录后请立即修改默认密码！

## 3. 启动服务

### 方式一：直接运行
```bash
cd backend
go run main.go
```

### 方式二：编译后运行
```bash
cd backend
go build -o main main.go
./main
```

服务启动后，访问：
- API 文档：`http://localhost:8080`
- 静态文件：`http://localhost:8080/uploads`

## 4. 测试接口

### 测试管理员登录
```bash
curl -X POST http://localhost:8080/api/v1/auth/admin/login \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"admin123"}'
```

### 测试获取景点列表
```bash
curl http://localhost:8080/api/v1/attractions
```

## 5. 小程序对接

### 修改小程序配置

在小程序的 `app.js` 中添加：
```javascript
App({
  onLaunch() {
    this.globalData.apiBaseURL = 'http://localhost:8080/api/v1'
  },
  globalData: {
    apiBaseURL: ''
  }
});
```

### 创建请求工具

创建 `utils/request.js`：
```javascript
const request = (url, method = 'GET', data = {}, needAuth = false) => {
  const app = getApp()
  const header = {
    'Content-Type': 'application/json'
  }

  if (needAuth && wx.getStorageSync('token')) {
    header['Authorization'] = `Bearer ${wx.getStorageSync('token')}`
  }

  return new Promise((resolve, reject) => {
    wx.request({
      url: app.globalData.apiBaseURL + url,
      method: method,
      data: data,
      header: header,
      success: (res) => {
        if (res.statusCode === 200 && res.data.code === 200) {
          resolve(res.data.data)
        } else {
          reject(res.data)
        }
      },
      fail: reject
    })
  })
}
```

## 6. 常见问题

### Q: 连接数据库失败
A: 检查 MySQL 服务是否启动，检查 .env 配置是否正确

### Q: 端口被占用
A: 修改 .env 中的 `SERVER_PORT` 为其他端口

### Q: 文件上传失败
A: 确保 `static/uploads` 目录存在且有写入权限

## 7. 下一步

1. 使用 Postman 测试所有接口
2. 对接小程序前端
3. 开发管理后台
4. 部署到服务器

## 技术支持

如有问题，请查看：
- `README.md` - 项目说明
- `API对接指南.md` - 详细对接文档
- `项目总结.md` - 完整项目文档
