<view class="shop-page">
  <!-- é¡¶éƒ¨å°é¢åŒºåŸŸ -->
  <view class="cover-section">
    <image class="cover-bg" src="{{merchant.cover_image || '/images/banner-1.jpg'}}" mode="aspectFill"></image>
    <view class="cover-overlay"></view>
    
    <!-- åº—é“ºä¿¡æ¯å¡ç‰‡ -->
    <view class="shop-card">
      <image class="shop-avatar" src="{{merchant.logo || '/images/default-shop.png'}}" mode="aspectFill"></image>
      <view class="shop-main-info">
        <view class="shop-name-row">
          <text class="shop-name">{{merchant.name || 'åº—é“ºåç§°'}}</text>
          <view class="verified-badge" wx:if="{{merchant.verified}}">
            <text class="badge-icon">âœ“</text>
            <text>å®˜æ–¹è®¤è¯</text>
          </view>
        </view>
        <view class="shop-stats">
          <view class="stat-item">
            <text class="stat-value">{{merchant.product_count || 0}}</text>
            <text class="stat-label">å•†å“</text>
          </view>
          <view class="stat-divider"></view>
          <view class="stat-item">
            <text class="stat-value">{{merchant.sales || 0}}</text>
            <text class="stat-label">é”€é‡</text>
          </view>
          <view class="stat-divider"></view>
          <view class="stat-item">
            <text class="stat-value">{{merchant.rating || '5.0'}}</text>
            <text class="stat-label">è¯„åˆ†</text>
          </view>
        </view>
      </view>
      <view class="follow-btn {{isFollowed ? 'followed' : ''}}" bindtap="toggleFollow">
        <text>{{isFollowed ? 'å·²å…³æ³¨' : '+ å…³æ³¨'}}</text>
      </view>
    </view>
  </view>

  <!-- åº—é“ºä»‹ç» -->
  <view class="intro-section" wx:if="{{merchant.description}}">
    <view class="section-header">
      <text class="section-icon">ğŸ“</text>
      <text class="section-title">åº—é“ºä»‹ç»</text>
    </view>
    <view class="intro-content">{{merchant.description}}</view>
  </view>

  <!-- è”ç³»ä¿¡æ¯ -->
  <view class="contact-section">
    <view class="contact-item" wx:if="{{merchant.address}}" bindtap="copyAddress">
      <text class="contact-icon">ğŸ“</text>
      <text class="contact-text">{{merchant.address}}</text>
      <text class="contact-action">å¤åˆ¶</text>
    </view>
    <view class="contact-item" wx:if="{{merchant.phone}}" bindtap="callPhone">
      <text class="contact-icon">ğŸ“</text>
      <text class="contact-text">{{merchant.phone}}</text>
      <text class="contact-action">æ‹¨æ‰“</text>
    </view>
  </view>

  <!-- å•†å“åŒºåŸŸ -->
  <view class="products-section">
    <!-- Tab åˆ‡æ¢ -->
    <view class="product-tabs">
      <view class="tab-item {{currentTab === 0 ? 'active' : ''}}" bindtap="switchTab" data-index="0">
        <text>å…¨éƒ¨å•†å“</text>
        <view class="tab-indicator" wx:if="{{currentTab === 0}}"></view>
      </view>
      <view class="tab-item {{currentTab === 1 ? 'active' : ''}}" bindtap="switchTab" data-index="1">
        <text>çƒ­é”€æ¨è</text>
        <view class="tab-indicator" wx:if="{{currentTab === 1}}"></view>
      </view>
    </view>

    <!-- å•†å“ç½‘æ ¼ -->
    <view class="product-grid">
      <view class="product-card" wx:for="{{products}}" wx:key="id" bindtap="goToProduct" data-id="{{item.id}}">
        <view class="product-img-wrapper">
          <image class="product-img" src="{{item.cover_image}}" mode="aspectFill"></image>
          <view class="hot-tag" wx:if="{{item.is_hot}}">çƒ­å–</view>
        </view>
        <view class="product-info">
          <view class="product-name">{{item.name}}</view>
          <view class="product-price-row">
            <text class="product-price">Â¥{{item.price}}</text>
            <text class="product-original" wx:if="{{item.original_price > item.price}}">Â¥{{item.original_price}}</text>
          </view>
          <view class="product-sales">å·²å”® {{item.sales || 0}} ä»¶</view>
        </view>
      </view>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-box" wx:if="{{loading}}">
      <view class="loading-spinner"></view>
      <text>åŠ è½½ä¸­...</text>
    </view>
    
    <!-- æ— æ›´å¤šæ•°æ® -->
    <view class="no-more" wx:if="{{!loading && !hasMore && products.length > 0}}">
      <text>â€”â€” å·²ç»åˆ°åº•å•¦ â€”â€”</text>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{!loading && products.length === 0}}">
      <text class="empty-icon">ğŸ›’</text>
      <text class="empty-text">åº—é“ºæš‚æ— å•†å“</text>
    </view>
  </view>
</view>
