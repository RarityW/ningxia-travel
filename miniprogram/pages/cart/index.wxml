<!-- è´­ç‰©è½¦é¡µé¢ -->
<custom-nav title="è´­ç‰©è½¦" back="{{true}}"></custom-nav>
<view class="container">
  <block wx:if="{{cartItems.length > 0}}">
    <!-- è´­ç‰©è½¦åˆ—è¡¨ -->
    <view class="cart-list">
      <view
        wx:for="{{cartItems}}"
        wx:key="id"
        class="cart-item"
      >
        <view class="item-select" bindtap="toggleSelect" data-id="{{item.id}}">
          <text class="select-icon {{item.selected ? 'selected' : ''}}">{{item.selected ? 'â˜‘' : 'â˜'}}</text>
        </view>
        <image class="item-image" src="{{item.coverImage}}" mode="aspectFill" />
        <view class="item-info">
          <text class="item-name">{{item.name}}</text>
          <text class="item-category">{{item.category}}</text>
          <view class="item-price-row">
            <text class="item-price">Â¥{{item.price}}</text>
            <view class="quantity-control">
              <text class="quantity-btn" bindtap="updateQuantity" data-id="{{item.id}}" data-type="decrease">-</text>
              <text class="quantity-num">{{item.quantity}}</text>
              <text class="quantity-btn" bindtap="updateQuantity" data-id="{{item.id}}" data-type="increase">+</text>
            </view>
          </view>
        </view>
        <view class="item-delete" bindtap="deleteItem" data-id="{{item.id}}">
          <text>ğŸ—‘</text>
        </view>
      </view>
    </view>

    <!-- åº•éƒ¨ç»“ç®—æ  -->
    <view class="bottom-bar">
      <view class="select-all" bindtap="toggleSelectAll">
        <text class="select-icon {{allSelected ? 'selected' : ''}}">{{allSelected ? 'â˜‘' : 'â˜'}}</text>
        <text class="select-text">å…¨é€‰</text>
      </view>
      <view class="total-section">
        <text class="total-text">åˆè®¡ï¼š</text>
        <text class="total-price">Â¥{{totalPrice}}</text>
        <text class="total-count">({{selectedCount}}ä»¶)</text>
      </view>
      <view class="checkout-btn" bindtap="checkout">
        <text>ç»“ç®—</text>
      </view>
    </view>
  </block>

  <view class="empty" wx:else>
    <text class="empty-icon">ğŸ›’</text>
    <text class="empty-text">è´­ç‰©è½¦æ˜¯ç©ºçš„</text>
    <view class="empty-btn" bindtap="goToMarket">
      <text>å»é€‰è´­</text>
    </view>
  </view>
</view>
